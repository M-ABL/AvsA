<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestro √Årbol de Amor</title>
    <style>
        :root {
            --primary-love: #ff4d6d;
            --bg-color: #fff5f8;
            --trunk-color: #795548;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: var(--bg-color);
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
            transition: background 1s ease;
        }

        /* --- Tarjeta Principal --- */
        #main-card {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 95%; /* Un poco m√°s ancho en m√≥viles */
            max-width: 500px;
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: 40px;
            box-shadow: 0 20px 60px rgba(255, 77, 109, 0.15);
            backdrop-filter: blur(10px);
            animation: popIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
        }

        /* --- El √Årbol --- */
        .tree-container {
            position: relative;
            width: 100%;
            height: 300px; /* Reducido un poco para que quepa todo el texto abajo */
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin-bottom: 10px;
        }

        .tree-svg {
            width: 250px;
            height: 100%;
            overflow: visible;
        }

        .branch {
            fill: none;
            stroke: var(--trunk-color);
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
        }

        .branch.grow { animation: growBranch 2s ease-out forwards; }
        @keyframes growBranch { to { stroke-dashoffset: 0; } }

        .hearts-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
        }

        .tree-heart {
            position: absolute;
            transform: scale(0);
            animation: popHeart 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        @keyframes popHeart { to { transform: scale(1); opacity: 1; } }

        /* --- Mensaje Centrado y Responsivo --- */
        .message-box {
            width: 100%;
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 110px;
        }

        .love-quote {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.5;
            font-style: italic;
            width: 100%;
            max-width: 400px; /* Evita que el texto toque los bordes */
            margin: 0 auto;
            text-align: center;
        }

        /* Ajuste para m√≥viles muy peque√±os */
        @media (max-width: 400px) {
            .love-quote { font-size: 0.95rem; }
            .t-val { font-size: 1.2rem; }
            .tree-container { height: 250px; }
        }

        .letter-anim {
            display: inline-block;
            opacity: 0;
            transform: translateY(10px);
            animation: slideUpLetter 0.5s ease forwards;
        }

        @keyframes slideUpLetter {
            to { opacity: 1; transform: translateY(0); }
        }

        .signature {
            color: #ff4d6d; 
            font-weight: bold;
            opacity: 0;
            transition: opacity 1.5s ease;
            margin: 5px 0;
            font-size: 1rem;
        }

        /* CAJA DEL RELOJ */
        .timer-box {
            background: #ffe5ec;
            padding: 15px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        .timer-title {
            color: #ff4d6d; 
            font-weight: bold; 
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .timer-row {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .time-unit { text-align: center; }
        .t-val { font-size: 1.3rem; font-weight: 800; color: #d81b60; }
        .t-label { font-size: 0.65rem; text-transform: uppercase; color: #888; }

        #heart-trigger { font-size: 80px; cursor: pointer; animation: float 2s infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .falling-heart { position: fixed; top: -10vh; animation: rain linear forwards; }
        @keyframes rain { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <div class="initial-container">
        <div id="heart-trigger">üíñ</div>
        <div class="initial-text">Para ti...</div>
    </div>

    <div id="main-card">
        <div class="signature" id="sigAbel" style="margin-bottom: 10px;">‚ÄîBy Abel ‚ù§Ô∏è</div>
        
        <div class="tree-container">
            <svg class="tree-svg" viewBox="0 0 200 300">
                <path class="branch" stroke-width="12" d="M100,300 C100,250 80,200 100,150" />
                <path class="branch" stroke-width="8" d="M100,180 C80,160 60,160 40,140" />
                <path class="branch" stroke-width="8" d="M100,180 C120,160 140,160 160,140" />
                <path class="branch" stroke-width="4" d="M100,150 C70,120 60,100 50,80" />
                <path class="branch" stroke-width="4" d="M100,150 C130,120 140,100 150,80" />
                <path class="branch" stroke-width="3" d="M100,150 C100,120 100,100 100,70" />
            </svg>
            <div class="hearts-layer" id="heartsLayer"></div>
        </div>

        <div class="message-box">
            <div class="love-quote" id="quoteTarget"></div>
            <div class="signature" id="sigAlejandra">‚Äî I love you Alejandra ‚ù§Ô∏è</div>
        </div>

        <div class="timer-box" id="timerBox">
            <div class="timer-title">Nuestro amor comenz√≥ hace.. ‚ù§Ô∏è-></div>
            <div class="timer-row">
                <div class="time-unit"><span class="t-val" id="d">0</span><br><span class="t-label">D√≠as</span></div>
                <div class="time-unit"><span class="t-val" id="h">0</span><br><span class="t-label">Hs</span></div>
                <div class="time-unit"><span class="t-val" id="m">0</span><br><span class="t-label">Min</span></div>
                <div class="time-unit"><span class="t-val" id="s">0</span><br><span class="t-label">Seg</span></div>
            </div>
        </div>
    </div>

    <script>
        const startDate = new Date('2016-01-01T00:00:00'); 
        const messageLines = [
            "Contigo encontr√© mi lugar favorito en el mundo.",
            "Cada segundo a tu lado es un regalo."
        ];

        const trigger = document.getElementById('heart-trigger');
        const mainCard = document.getElementById('main-card');
        const quoteTarget = document.getElementById('quoteTarget');
        const sigAbel = document.getElementById('sigAbel');
        const sigAlejandra = document.getElementById('sigAlejandra');
        const timerBox = document.getElementById('timerBox');

        trigger.addEventListener('click', () => {
            document.querySelector('.initial-container').style.display = 'none';
            mainCard.style.display = 'flex';
            document.body.style.background = '#ffe5ec';

            document.querySelectorAll('.branch').forEach(b => b.classList.add('grow'));
            setTimeout(createBranchCoveringCanopy, 1200);
            setTimeout(typeWriterEffect, 4000);
            startTimer();
            setInterval(createFallingHeart, 400);
        });

        function typeWriterEffect() {
            let lineIndex = 0;
            let charIndex = 0;
            
            function typeChar() {
                if (lineIndex < messageLines.length) {
                    if (charIndex < messageLines[lineIndex].length) {
                        const char = messageLines[lineIndex].charAt(charIndex);
                        const span = document.createElement('span');
                        span.className = 'letter-anim';
                        span.innerHTML = char === ' ' ? '&nbsp;' : char;
                        quoteTarget.appendChild(span);
                        charIndex++;
                        setTimeout(typeChar, 50); 
                    } else {
                        quoteTarget.appendChild(document.createElement('br'));
                        lineIndex++;
                        charIndex = 0;
                        setTimeout(typeChar, 500); 
                    }
                } else {
                    sigAbel.style.opacity = '1';
                    sigAlejandra.style.opacity = '1';
                    setTimeout(() => timerBox.style.opacity = '1', 1000);
                }
            }
            typeChar();
        }

        function createBranchCoveringCanopy() {
            const heartsLayer = document.getElementById('heartsLayer');
            const points = [
                {x: 100, y: 220, c: 10, s: 15}, {x: 100, y: 160, c: 30, s: 25},
                {x: 70, y: 170, c: 30, s: 20}, {x: 130, y: 170, c: 30, s: 20},
                {x: 50, y: 130, c: 30, s: 25}, {x: 150, y: 130, c: 30, s: 25},
                {x: 60, y: 100, c: 40, s: 30}, {x: 140, y: 100, c: 40, s: 30},
                {x: 100, y: 75, c: 60, s: 40}
            ];
            points.forEach(p => {
                for(let i=0; i<p.c; i++) {
                    const h = document.createElement('div');
                    h.className = 'tree-heart';
                    h.innerText = ['‚ù§Ô∏è','üíñ','üíó','üíï','üå∏'][Math.floor(Math.random()*5)];
                    h.style.fontSize = (Math.random()*12 + 10)+'px';
                    h.style.left = `${((p.x + (Math.random()-0.5)*p.s*2)/200)*100}%`;
                    h.style.top = `${((p.y + (Math.random()-0.5)*p.s*2)/300)*98}%`;
                    h.style.animationDelay = Math.random()*2+'s';
                    heartsLayer.appendChild(h);
                }
            });
        }

        function startTimer() {
            const update = () => {
                const diff = new Date() - startDate;
                document.getElementById('d').innerText = Math.floor(diff / 86400000);
                document.getElementById('h').innerText = Math.floor((diff / 3600000) % 24);
                document.getElementById('m').innerText = Math.floor((diff / 60000) % 60);
                document.getElementById('s').innerText = Math.floor((diff / 1000) % 60);
            };
            update(); setInterval(update, 1000);
        }

        function createFallingHeart() {
            const h = document.createElement('div');
            h.innerText = ['üå∏', '‚ù§Ô∏è'][Math.floor(Math.random()*2)]; 
            h.className = 'falling-heart';
            h.style.left = Math.random()*100+'vw';
            h.style.animationDuration = Math.random()*2+3+'s';
            h.style.fontSize = Math.random()*10+10+'px';
            h.style.opacity = Math.random()*0.5+0.3;
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 5000);
        }
    </script>
</body>
</html>